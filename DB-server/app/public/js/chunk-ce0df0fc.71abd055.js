(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ce0df0fc"],{3045:function(t,o,s){"use strict";s.r(o);var e=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("Panel",{staticClass:"panel"},[s("div",{staticClass:"box"},[s("Row",{staticClass:"contain",attrs:{type:"flex",justify:"center"}},[s("Col",{staticClass:"containLeft",attrs:{span:"12"}},[s("img",{staticClass:"img",attrs:{src:t.API_HOST+t.bookinfo.cover_address,alt:""}})]),s("Col",{staticClass:"containRight",attrs:{span:"12"}},[s("h1",{staticClass:"title"},[t._v(t._s(t.bookinfo.book_name))]),s("p",{staticClass:"info"},[t._v("作者："+t._s(t.bookinfo.author))]),s("p",{staticClass:"info"},[t._v("出版社："+t._s(t.bookinfo.press))]),s("p",{staticClass:"info"},[t._v("类别："+t._s(t.bookinfo.type))]),s("p",{staticClass:"info"},[t._v("所属："+t._s(t.bookinfo.belong))]),s("p",{staticClass:"info"},[t._v("评论数："+t._s(t.bookinfo.comment_num))]),s("div",[s("Button",{staticClass:"readBtn",attrs:{type:"info"},on:{click:t.read}},[t._v("开始阅读")]),"公共"!==this.$store.state.bookinfo.belong?s("Button",{staticClass:"readBtn",attrs:{type:"warning"},on:{click:t.change}},[t._v("修改信息")]):t._e(),"公共"!==this.$store.state.bookinfo.belong?s("Button",{staticClass:"readBtn",attrs:{type:"error"},on:{click:t.remove}},[t._v("删除")]):t._e()],1)])],1)],1),s("div",{staticClass:"commit"},[s("div",{staticClass:"commit_title"},[s("strong",{staticStyle:{"font-size":"20px"}},[t._v("评论")]),s("Button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"info",size:"small"},on:{click:t.commit}},[t._v("评论")]),s("Input",{staticStyle:{width:"300px",float:"right"},attrs:{placeholder:"Enter something..."},model:{value:t.commitText,callback:function(o){t.commitText=o},expression:"commitText"}})],1),t._l(this.commentList,function(o,e){return s("div",{key:e,staticClass:"commit_text"},[s("div",{staticClass:"commit_top"},[s("span",{staticClass:"commit_name"},[t._v(t._s(o.user_name))]),s("span",{staticClass:"commit_time"},[t._v(t._s(o.date))])]),s("div",{staticClass:"commit_context"},[t._v(t._s(o.content))])])})],2)])},n=[],a=s("f8f0"),i=s("eeb9");function c(t){return Object(i["a"])({url:"/api/v1/book",method:"delete",withCredentials:!0,data:t})}var r=s("a01c"),l=s("6669"),u=s("ef33"),f={data:function(){return{bookinfo:{},API_HOST:"",commitText:"",commentList:[]}},mounted:function(){var t=this;Object(u["a"])(this.$store.state.bookinfo.book_name).then(function(o){console.log(o),200==o.status?t.bookinfo=o.msg.data[0]:console.log(o.msg.msg)}).catch(function(t){console.log(t)}),Object(l["a"])(this.$store.state.bookinfo.book_id).then(function(o){console.log(o),200==o.status?t.commentList=o.msg.data:console.log(o.msg.msg)}).catch(function(t){console.log(t)})},components:{Panel:a["a"]},methods:{read:function(){var t={book_id:this.$store.state.bookinfo.book_id};this.$router.params=t,this.$router.push("/book/".concat(t.book_id,"/bookinfo/readbook"))},change:function(){this.$router.push({path:"/home/changebook"})},remove:function(){var t=this;console.log(this.bookinfo.book_id);var o={book_id:this.$store.state.bookinfo.book_id};c(o).then(function(o){console.log(o),200==o.status?(t.$Message.success("删除成功！"),t.$router.push({path:"/home"})):console.log(o.msg.msg)}).catch(function(t){console.log(t)})},commit:function(){var t=this,o={book_id:this.$store.state.bookinfo.book_id,content:this.commitText};Object(r["a"])(o).then(function(o){console.log(o),200==o.status?(t.$Message.success("评论成功！"),t.commitText="",location.reload()):console.log(o.msg.msg)}).catch(function(t){console.log(t)})}}},m=f,b=(s("a73e"),s("2877")),d=Object(b["a"])(m,e,n,!1,null,"2689bff8",null);o["default"]=d.exports},4861:function(t,o,s){"use strict";var e=s("73a8"),n=s.n(e);n.a},6669:function(t,o,s){"use strict";s.d(o,"a",function(){return n});var e=s("eeb9");function n(t){return Object(e["a"])({url:"/api/v1/book/comment?book_id="+t,method:"get",withCredentials:!0})}},"73a8":function(t,o,s){},a01c:function(t,o,s){"use strict";s.d(o,"a",function(){return n});var e=s("eeb9");function n(t){return Object(e["a"])({url:"/api/v1/book/comment",method:"post",withCredentials:!0,data:t})}},a73e:function(t,o,s){"use strict";var e=s("eea6"),n=s.n(e);n.a},eea6:function(t,o,s){},ef33:function(t,o,s){"use strict";s.d(o,"a",function(){return n});var e=s("eeb9");function n(t){return Object(e["a"])({url:"/api/v1/book/search?keyword="+t,method:"get",withCredentials:!0})}},f8f0:function(t,o,s){"use strict";var e=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("section",{class:[t.panelClass,t.cname]},[t._t("default")],2)},n=[],a={props:{cname:{type:String,default:""}},data:function(){return{panelClass:"panel"}}},i=a,c=(s("4861"),s("2877")),r=Object(c["a"])(i,e,n,!1,null,null,null);o["a"]=r.exports}}]);