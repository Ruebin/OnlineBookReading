(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b2743ff"],{3045:function(t,o,s){"use strict";s.r(o);var n=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("Panel",{staticClass:"panel"},[s("Button",{staticStyle:{margin:"10px 30px"},attrs:{type:"info",size:"small"},on:{click:t.goback}},[t._v("返回主页")]),s("div",{staticClass:"box"},[s("Row",{staticClass:"contain",attrs:{type:"flex",justify:"center"}},[s("Col",{staticClass:"containLeft",attrs:{span:"12"}},[s("img",{staticClass:"img",attrs:{src:t.API_HOST+t.bookinfo.cover_address,alt:""}})]),s("Col",{staticClass:"containRight",attrs:{span:"12"}},[s("h1",{staticClass:"title"},[t._v(t._s(t.bookinfo.book_name))]),s("p",{staticClass:"info"},[t._v("作者："+t._s(t.bookinfo.author))]),s("p",{staticClass:"info"},[t._v("出版社："+t._s(t.bookinfo.press))]),s("p",{staticClass:"info"},[t._v("类别："+t._s(t.bookinfo.type))]),s("p",{staticClass:"info"},[t._v("所属："+t._s(t.bookinfo.belong))]),s("p",{staticClass:"info"},[t._v("评论数："+t._s(t.bookinfo.comment_num))]),s("div",[s("Button",{staticClass:"readBtn",attrs:{type:"info"},on:{click:t.read}},[t._v("开始阅读")]),s("Button",{staticClass:"readBtn",attrs:{type:"warning"},on:{click:t.change}},[t._v("修改信息")]),s("Button",{staticClass:"readBtn",attrs:{type:"error"},on:{click:t.remove}},[t._v("删除")])],1)])],1)],1),s("div",{staticClass:"commit"},[s("div",{staticClass:"commit_title"},[s("strong",{staticStyle:{"font-size":"20px"}},[t._v("评论")]),s("Button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"info",size:"small"},on:{click:t.commit}},[t._v("评论")]),s("Input",{attrs:{placeholder:"Enter something..."},model:{value:t.commitText,callback:function(o){t.commitText=o},expression:"commitText"}})],1),t._l(this.commentList,function(o,n){return s("div",{key:n,staticClass:"commit_text"},[s("div",{staticClass:"commit_top"},[s("span",{staticClass:"commit_name"},[t._v(t._s(o.user_name))]),s("span",{staticClass:"commit_time"},[t._v(t._s(o.date))])]),s("div",{staticClass:"commit_context"},[t._v(t._s(o.content))])])})],2)],1)},e=[],a=s("f8f0"),i=s("eeb9");function c(t){return Object(i["a"])({url:"/api/v1/book",method:"delete",withCredentials:!0,data:t})}function l(t){return Object(i["a"])({url:"/api/v1/book/comment",method:"post",withCredentials:!0,data:t})}function r(t){return Object(i["a"])({url:"/api/v1/book/comment?book_id="+t,method:"get",withCredentials:!0})}var u=s("ef33"),m={data:function(){return{bookinfo:{},API_HOST:"",commitText:"",commentList:[]}},mounted:function(){var t=this;Object(u["a"])(this.$store.state.bookinfo.book_name).then(function(o){console.log(o),200==o.status?(t.bookinfo=o.msg.data[0],t.$store.state.bookinfo=o.msg.data[0]):console.log(o.msg.msg)}).catch(function(t){console.log(t)}),r(this.$store.state.bookinfo.book_id).then(function(o){console.log(o),200==o.status?t.commentList=o.msg.data:console.log(o.msg.msg)}).catch(function(t){console.log(t)})},components:{Panel:a["a"]},methods:{read:function(){var t={book_id:this.$store.state.bookinfo.book_id};this.$router.params=t,this.$router.push("/book/".concat(t.book_id,"/bookinfo/readbook"))},change:function(){this.$router.push({path:"/home/changebook"})},goback:function(){this.$router.push({path:"/home"})},remove:function(){var t=this;console.log(this.bookinfo.book_id);var o={book_id:this.$store.state.bookinfo.book_id};c(o).then(function(o){console.log(o),200==o.status?(t.$Message.success("删除成功！"),t.$router.push({path:"/home"})):console.log(o.msg.msg)}).catch(function(t){console.log(t)})},commit:function(){var t=this,o={book_id:this.$store.state.bookinfo.book_id,content:this.commitText};l(o).then(function(o){console.log(o),200==o.status?(t.$Message.success("评论成功！"),t.commitText=""):console.log(o.msg.msg)}).catch(function(t){console.log(t)})}}},f=m,h=(s("fe3a"),s("2877")),b=Object(h["a"])(f,n,e,!1,null,"7bc8064b",null);o["default"]=b.exports},"41d6":function(t,o,s){},4861:function(t,o,s){"use strict";var n=s("73a8"),e=s.n(n);e.a},"73a8":function(t,o,s){},ef33:function(t,o,s){"use strict";s.d(o,"a",function(){return e});var n=s("eeb9");function e(t){return Object(n["a"])({url:"/api/v1/book/search?keyword="+t,method:"get",withCredentials:!0})}},f8f0:function(t,o,s){"use strict";var n=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("section",{class:[t.panelClass,t.cname]},[t._t("default")],2)},e=[],a={props:{cname:{type:String,default:""}},data:function(){return{panelClass:"panel"}}},i=a,c=(s("4861"),s("2877")),l=Object(c["a"])(i,n,e,!1,null,null,null);o["a"]=l.exports},fe3a:function(t,o,s){"use strict";var n=s("41d6"),e=s.n(n);e.a}}]);